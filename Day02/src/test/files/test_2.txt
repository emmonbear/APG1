Go-подпрограммы сканеров используют один и тот же канал, u n s e e n L in k s . Глав­
ная go-подпрограмма отвечает за исключение дублирования элементов, которые она
получает из рабочего списка, а затем отправляет каждую непросмотренную ссылку
по каналу u n s e e n L in k s go-подпрограмме сканирования.
Отображение s e e n замкнуто в пределах главной go-подпрограммы, т.е. доступ к
нему имеет только главная go-подпрограмма. Подобно другим разновидностям со­
крытия информации, замкнутость помогает нам обосновать корректность програм­
мы. Например, локальные переменные не могут упоминаться по имени за пределами
функции, в которой они были объявлены; переменные, не сбежавшие (раздел 2.3.4) из
функции, недоступны вне этой функции; а инкапсулированные поля объекта не могут
быть доступны ничему, кроме методов этого объекта. Во всех случаях сокрытие ин­
формации помогает ограничить нежелательные взаимодействия между частями про­
граммы.
Ссылки, найденные функцией c r a w l, отправляются в рабочий список из выделен­
ной go-подпрограммы, чтобы избежать взаимоблокировки.
Для экономии места мы не рассматривали в этом примере проблему завершения
программы.
У пражнение 8.6. Добавьте ограничение по глубине в параллельный сканер. Иначе
говоря, если пользователь устанавливает -d e p th = 3 , то выбираются только те URL,
которые достижимы через цепочку не более чем из трех ссылок.
У пражнение 8.7. Напишите параллельную программу, которая создает локальное
зеркало веб-сайта, загружая все доступные страницы и записывая их в каталог на
локальном диске. Выбираться должны только страницы в пределах исходного домена
(например, g o la n g .o r g ) . URL в страницах зеркала должны при необходимости быть
изменены таким образом, чтобы они ссылались на зеркальную страницу, а не на ори­
гинал.